# エラー修正: CSA1-1-107

## 修正内容

F-REGI API呼び出し時に `MONTHLYMODE` パラメータを送信しないように修正しました。

## 修正理由

F-REGIのリダイレクト決済（SaaS型）では、洗替利用フラグ（`MONTHLYMODE`）を指定することができません。

**エラーコード**: `CSA1-1-107`  
**エラーメッセージ**: `リダイレクト決済（SaaS型）発行処理時の洗替利用フラグは指定できません`

## 実装変更

### 変更前
```php
if ($billingType === 'monthly') {
    $apiParams['MONTHLYMODE'] = '0'; // 月額課金
}
```

### 変更後
```php
// 月額課金の場合も、リダイレクト決済ではMONTHLYMODEを送信しない
// 月額課金の実装が必要な場合は、別のAPIを使用する必要がある
// if ($billingType === 'monthly') {
//     $apiParams['MONTHLYMODE'] = '0'; // リダイレクト決済では指定不可
// }
```

## 注意事項

1. **月額課金プランの処理について**
   - 現在の実装では、月額課金プランも一回限り決済と同じようにリダイレクト決済を使用します
   - 実際の月額課金機能を実装する場合は、F-REGIの月次課金サービスAPIを使用する必要があります

2. **プランの決済タイプ**
   - `billing_type: monthly` のプランが存在する場合でも、リダイレクト決済では `MONTHLYMODE` を送信しません
   - プランの決済タイプは将来の拡張のために保持されていますが、現在は同じように処理されます

## テスト

月額課金プランでも、エラーが発生せずにリダイレクト決済が実行されることを確認してください。
